/*!
 * Amplify Core 1.1.2
 *
 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
(function(b,d){var c=[].slice,e={};var a=b.amplify={publish:function(h){if(typeof h!=="string"){throw new Error("You must provide a valid topic to publish.")}var g=c.call(arguments,1),m,l,k,j=0,f;if(!e[h]){return true}m=e[h].slice();for(k=m.length;j<k;j++){l=m[j];f=l.callback.apply(l.context,g);if(f===false){break}}return f!==false},subscribe:function(k,g,p,n){if(typeof k!=="string"){throw new Error("You must provide a valid topic to create a subscription.")}if(arguments.length===3&&typeof p==="number"){n=p;p=g;g=null}if(arguments.length===2){p=g;g=null}n=n||10;var h=0,f=k.split(/\s/),o=f.length,m;for(;h<o;h++){k=f[h];m=false;if(!e[k]){e[k]=[]}var j=e[k].length-1,l={callback:p,context:g,priority:n};for(;j>=0;j--){if(e[k][j].priority<=n){e[k].splice(j+1,0,l);m=true;break}}if(!m){e[k].unshift(l)}}return p},unsubscribe:function(f,h,k){if(typeof f!=="string"){throw new Error("You must provide a valid topic to remove a subscription.")}if(arguments.length===2){k=h;h=null}if(!e[f]){return}var j=e[f].length,g=0;for(;g<j;g++){if(e[f][g].callback===k){if(!h||e[f][g].context===h){e[f].splice(g,1);g--;j--}}}}}}(this));(function(d,e){var c;function b(g){var l=g.split("."),j=c,f="";for(var h=0,k=l.length;h<k;h++){f=l[h];j[f]=j[f]||{};j=j[f]}return j}function a(g){var f=BI.env.getDomain(true)||"businessinsider.com";var h=["static1","static2","static3","static4","static5","static6"];return"http://"+h[Math.floor(Math.random()*h.length)]+"."+f+g}c={namespace:b,CDNPath:a};d.BI=d.BI||c;b("abTests");b("post");b("comments");b("authenticated.twitter");b("authenticated.facebook");b("authenticated.linkedin");b("authenticated.googleplus")})(window);(function(b,e){var d;b.namespace("cookies");function c(j,k,h){var g="";if(h){var i=new Date();i.setTime(i.getTime()+(h*60*60*1000));g="; expires="+i.toGMTString()}document.cookie=j+"="+k+g+"; path=/"}function a(h){var k=h+"=";var g=document.cookie.split(";");for(var j=0;j<g.length;j++){var l=g[j];while(l.charAt(0)==" "){l=l.substring(1,l.length)}if(l.indexOf(k)==0){return l.substring(k.length,l.length)}}return null}function f(g){if(a(g)){var h=new Date();document.cookie=g+"=0;expires="+h.toGMTString()+";path=/;";return true}}d={set:c,get:a,clear:f};b.cookies=d}(BI));(function(a,d){var b;a.namespace("iframe");var c=function(f,e){if(e<=5){return}var g=document.getElementById(f);g.height=e+"px";return true};b={expand:c};a.iframe=b;a.expandIframe=a.iframe.expand}(BI));(function(b,f){b.namespace("env");var d;function e(g){d=g;return d}function c(g){if(g){return d.replace(d.split(".")[0]+".","")}return d}function a(){var g=window.location.host;return g.split(".")[0]=="www"||g.split(".")[0]=="stage"||g.indexOf("uk.businessinsider")>-1}b.inProduction=a;b.env={inProduction:a,setDomain:e,getDomain:c}}(BI));(function(b,d){var c;b.namespace("UUID");function a(){var f=new Date().getTime();var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=(f+Math.random()*16)%16|0;f=Math.floor(f/16);return(h=="x"?g:(g&7|8)).toString(16)});return e}c={get:a};b.UUID=c}(BI));(function(b,f){var e;var d={};b.namespace("pageData");function g(h,i){d[h]=i}function a(h){return d[h]}function c(h){return d}e={set:g,get:a,getAll:c};b.pageData=e}(BI));(function(b,g){var d;var h;b.namespace("rubicon");function e(){var i="http://tap-cdn.rubiconproject.com/partner/scripts/rubicon/dorothy.js?pc=10306/29788";var j=document.createElement("script");j.src=i;document.head.appendChild(j);oz_api="valuation";oz_site="10306/29788";oz_zone="150038";oz_async=true;oz_callback=function(k){window.parent.BI.rubicon.onInsightLoaded(window.rp_valuation,window.instanceId)}}function c(j,i){if(a[i]&&typeof a[i].cb==="function"){a[i].cb(j);delete a[i]}}var a={};function f(i,o){var l=b.UUID.get();var k=document.createElement("iframe");k.style.display="none";document.getElementsByTagName("body")[0].appendChild(k);var j=document.createElement("script");var m='instanceId = "'+l+'"; oz_ad_slot_size = "'+i+'"; setGlobals();';j.text="setGlobals = "+e.toString()+";"+m;var n=k.contentWindow.document;n.getElementsByTagName("head")[0].appendChild(j);a[l]={cb:o,iframe:k}}d={query:f,onInsightLoaded:c};b.rubicon=d}(BI));(function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}}}}());(function(e,c,b,h){var g;function d(){g=function(){g.q.push(arguments)};g.q=[];e.Krux=e.Krux||g}function f(l){var i;var j="kx"+l;if(e.localStorage){return e.localStorage[j]||""}else{if(c.cookieEnabled){i=b.cookie.match(j+"=([^;]*)");return(i&&unescape(i[1]))||""}else{return""}}}function a(){g.user=f("user");g.segments=f("segs")&&f("segs").split(",")||[]}d();a()}(window,navigator,document));(function(c,k,g){var d=4442842;var f;k.namespace("DFP");function e(n){var l=n.offsetLeft;var o=n.offsetTop;var m;m=n.offsetParent;while(m){l+=m.offsetLeft;o+=m.offsetTop;n=m;m=n.offsetParent}return{x:l,y:o}}function i(m){var n;var l=".ad.dfp";if(typeof m==="string"){l+=m}n=document.querySelectorAll(l);n.forEach=Array.prototype.forEach;return n}function j(){i(".lazyload:not(.rendered)").forEach(function(l){h(l)})}function h(n,r,q){var o;var m;var l=!!n.getAttribute("data-companion-ad");var p;m="ad-"+k.UUID.get();n.setAttribute("id",m);p=n.getAttribute("data-sizes").split(",");p.forEach(function(t,s){p[s]=t.split("x");p[s].forEach(function(u,v){p[s][v]=parseInt(u,10)})});googletag.cmd.push(function(){o=googletag.defineSlot("/"+d+"/"+n.getAttribute("data-adunit"),p,m);if(n.hasAttribute("data-responsive")){o.defineSizeMapping(JSON.parse(n.getAttribute("data-responsive")))}o.addService(googletag.pubads());if(l===true){o.addService(googletag.companionAds());o.set("backfill","true");console.log("DFP: companion ad code enabled")}if(r!==undefined){o.setCollapseEmptyDiv(r)}googletag.pubads().setTargeting("ksg",Krux.segments);googletag.pubads().setTargeting("kuid",Krux.user);googletag.pubads().setTargeting("khost",encodeURIComponent(location.hostname));k.DFP.adRegions[n.getAttribute("data-region")]=o});googletag.cmd.push(function(){function s(u){var t;if(t=n.getAttribute("data-"+u)){o.setTargeting(u,t)}}s("adunit");s("authors");s("pagetype");s("pos");s("region");s("sizes");s("tag");s("url");s("views");if(q){q(o)}});if(n.getAttribute("data-companion-ad")!=="delayed-load"){googletag.cmd.push(function(){googletag.display(m)});n.classList.add("rendered")}}function b(){i(":not(.rendered):not(.lazyload):not(.rubicon)").forEach(function(l){h(l)})}function a(){i(".rubicon:not(.rendered)").forEach(function(m){var l=m.getAttribute("data-sizes").split(",")[0];k.rubicon.query(l,function(n){h(m,false,function(o){if(n&&n.pmp){var p=typeof n.pmp.eligible!=="undefined"?n.pmp.eligible:false;o.setTargeting("deal",p)}if(n&&n.estimate){var q=typeof n.estimate.tier!=="undefined"?n.estimate.tier:false;o.setTargeting("tier",q)}})});m.classList.add("rendered")})}c.subscribe("adRender",b);c.subscribe("adRenderLazyLoad",j);c.subscribe("adRenderRubicon",a);document.addEventListener("DOMContentLoaded",j);f=document.createElement("script");f.async=true;f.src="//www.googletagservices.com/tag/js/gpt.js";f.type="text/javascript";document.head.appendChild(f);k.DFP={adRegions:{},loaded:false,renderAd:h};g.googletag=g.googletag||{cmd:[]};googletag.cmd.push(function(){googletag.pubads().enableAsyncRendering();googletag.pubads().enableVideoAds();googletag.companionAds().setRefreshUnfilledSlots(true);googletag.enableServices();k.DFP.loaded=true;c.publish("dfpLoaded")})}(amplify,BI,window));(function(){function a(){var c=document.getElementById("breaking-module-rendered");document.getElementById("breaking-module-siteskin").innerHTML=c.innerHTML;c.parentNode.removeChild(c);document.body.className=document.body.classList.remove("responsive")}function b(){setTimeout(a,0)}BI.addSiteSkinBorder=b;document.addEventListener("DOMContentLoaded",function(){if(document.querySelector('.ad[data-region="Skin"]')!==null){document.body.classList.remove("responsive")}})}());(function(d){amplify.subscribe("contentloaded-countdownclock",function(i){d.countdownTimer.end=i.end;d.countdownTimer.onFinish=i.onFinish;if(i.isTicking){d.countdownTimer.start()}else{d.countdownTimer.blink()}});var g='<span class="colon"><span>:</span></span>';var f;var e;var c;var a=function(l){var k="";var m;l=""+l;for(var j=0;j<l.length;j++){m=l.charAt(j);if(m>="0"&&m<="9"){k+='<span class="digit-'+m+'"><span>'+m+"</span></span>"}}return'<span class="digits">'+k+"</span>"};function b(i){if(i=="hide"){f.className=f.className+" hide"}else{if(i=="blink"){c=document.getElementById("countdownLive");c.className="live";c.setAttribute("data-bi-countdown-effect","blink");e.className="hide"}}}function h(){var l=d.countdownTimer.end-Math.floor(new Date().getTime()/1000);if(e==null){e=document.getElementById("countdownTimer")}if(f==null){f=document.getElementById("countdown")}if(l<=-3600||(d.countdownTimer.onFinish=="hide"&&l<=0)){b("hide")}else{if(l<=0){b("blink")}}amplify.publish("countdown-tick");var k=l%60;k=k<10?"0"+k:k;var j=Math.floor(l/60)%60;j=j<10?"0"+j:j;var i=Math.floor(l/3600);var m=g+a(k);if(l>=60){m=a(j)+m}if(l>=3600){m=a(i)+g+m}e.innerHTML=m;setTimeout(h,500)}d.countdownTimer={end:0,onFinish:"blink",start:h,finish:b}}(BI));